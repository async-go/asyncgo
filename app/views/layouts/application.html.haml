!!! 5
%html{ lang: 'en' }
  %head
    %title AsyncGo
    %meta{ content: 'text/html; charset=UTF-8', 'http-equiv': 'Content-Type' }
    %meta{ charset: 'utf-8' }
    %meta{ name: 'viewport',
      content: 'width=device-width, initial-scale=1, shrink-to-fit=no' }
    = csrf_meta_tags
    = csp_meta_tag
    %link{ rel: 'stylesheet',
      href: 'https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css',
      integrity: 'sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1',
      crossorigin: 'anonymous' }

    = stylesheet_link_tag 'application', media: 'all',
      'data-turbolinks-track': 'reload'
    = javascript_pack_tag 'application', 'data-turbolinks-track': 'reload'
    = favicon_link_tag image_path('logo.svg')

  %body
    %nav.navbar.navbar-expand-lg.navbar-light.bg-light
      .container-fluid
        %a.navbar-brand{ href: root_path }
          = image_tag('logo.svg', alt: 'AsyncGo')
          %span AsyncGo
        %button.navbar-toggler{ type: 'button', 'data-bs-toggle' => 'collapse',
          'data-bs-target' => '#navbar-content', 'aria-controls' => 'navbar-content',
          'aria-expanded' => 'false', 'aria-label' => 'Toggle navigation' }
          %span.navbar-toggler-icon
        .collapse.navbar-collapse#navbar-content
          %ul.navbar-nav.me-auto
            - if current_user&.team
              %li.nav-item= link_to 'Topics', team_topics_path(current_user.team),
                class: class_names('nav-link',
                                   active: current_page?(team_topics_path(current_user.team)))
          %ul.navbar-nav.me-2
            - if current_user
              - if current_user.team_id
                %li.nav-item= link_to 'Team', edit_team_path(current_user.team_id),
                  class: class_names('nav-link',
                  active: current_page?(edit_team_path(current_user.team_id)))
              - else
                %li.nav-item= link_to 'Create Team', new_team_path,
                  class: class_names('nav-link', active: current_page?(new_team_path))
              %li.nav-item= link_to 'Sign out', sign_out_path, method: :delete, class: 'nav-link'
            - else
              %li.nav-item= link_to 'Sign in', '/auth/google_oauth2', class: 'nav-link'
    %main.container.mt-4{ role: 'main' }
      .sticky-top.mt-2
        - if flash.any?
          - flash.each do |type, message|
            .alert.alert-dismissible.fade.show{ class: "alert-#{type}", role: 'alert' }
              %span= message
              %button.btn-close{ 'data-bs-dismiss' => 'alert', 'aira-lable' => 'close' }
      = yield
    %script{ src: 'https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js',
      integrity: 'sha384-pQQkAEnwaBkjpqZ8RU1fF1AKtTcHJwFl3pblpTlHXybJjHpMYo79HY3hIi4NKxyj',
      crossorigin: 'anonymous', type: 'text/javascript' }
