!!! 5
%html{ lang: 'en' }
  %head
    = render partial: 'shared/header'
  %body
    %header.sticky-top.px-2.bg-white.border-bottom.shadow-lg.mb-5
      %nav.navbar.navbar-expand-lg.navbar-light
        .container-fluid
          = link_to root_path, class: 'navbar-brand pe-4 border-2' do
            = image_tag('logo.svg', alt: 'AsyncGo', class: 'img-fluid')
            %span AsyncGo
          %button.navbar-toggler.border-0{ type: 'button', 'data-bs-toggle' => 'collapse',
            'data-bs-target' => '#navbar-content', 'aria-controls' => 'navbar-content',
            'aria-expanded' => 'false', 'aria-label' => 'Toggle navigation' }
            %span.navbar-toggler-icon
          .collapse.navbar-collapse#navbar-content
            - if current_user&.team
              %span.badge.bg-secondary.fs-6 Active Team: #{current_user.team.name}
              .ms-3.me-auto.dropdown
                .badge.bg-secondary.fs-6.dropdown-toggle{ 'id': 'notificationDropdown',
                  'role': 'button', 'data-bs-toggle': 'dropdown',
                  'aria-haspopup': 'true', 'aria-expanded': 'false' }
                  %span
                    %i.fas.fa-bell.text-warning
                    = notifications.count
                - if notifications.count.positive?
                  %ul.dropdown-menu{ 'aria-labelledby': 'notificationDropdown' }
                    - notifications.each do |notification|
                      %li= link_to notification_text(notification),
                        user_notification_path(notification.user, notification),
                        class: 'dropdown-item'
                      %li= link_to 'âœ… Clear all notifications',
                        clear_user_notifications_path(current_user),
                        method: :post, class: 'dropdown-item'
            %ul.navbar-nav.ms-auto.me-2
              %li.nav-item= link_to 'Docs', 'https://docs.asyncgo.com', class: 'nav-link',
                target: :_blank, rel: :noopener
              - if current_user
                - if current_user.team
                  %li.nav-item= active_link_to 'Topics', team_topics_path(current_user.team),
                    'nav-link'
                  %li.nav-item= active_link_to 'Admin', edit_team_path(current_user.team_id),
                    'nav-link'
                - else
                  %li.nav-item= active_link_to 'Create Team', new_team_path, 'nav-link'
                %li.nav-item= link_to 'Sign out', sign_out_path, method: :delete, class: 'nav-link'
              - else
                %li.nav-item.dropdown
                  %a.nav-link.dropdown-toggle{ 'href': '#',
                    'id': 'signinDropdown', 'role': 'button', 'data-bs-toggle': 'dropdown',
                    'aria-haspopup': 'true', 'aria-expanded': 'false' } Sign in
                  %ul.dropdown-menu{ 'aria-labelledby': 'signinDropdown' }
                    %li= button_to 'Google', '/auth/google_oauth2', class: 'dropdown-item'
                    %li= button_to 'GitHub', '/auth/github', class: 'dropdown-item'
    %main.container.mt-4{ role: 'main' }
      .sticky-top.mt-2
        - if flash.any?
          - flash.each do |type, message|
            .alert.alert-dismissible.fade.show{ class: "alert-#{type}", role: 'alert' }
              %span= message
              %button.btn-close{ 'data-bs-dismiss' => 'alert', 'aira-lable' => 'close' }
      = yield
    %footer.fixed-bottom.py-2.bg-light.border-top.border-3
      .container
        .row
          .col-8.small
            .text-muted.d-block &copy;2021 AsyncGo
            = link_to 'Terms of Use / Privacy Policy', 'https://asyncgo.com/policies.html',
              target: :_blank, rel: :noopener
          .col-4
            .d-flex.justify-content-end.align-items-center.gap-2.h-100
              = link_to 'https://twitter.com/async_go', class: 'link-secondary' do
                %i.px-1.fab.fa-1x.fa-twitter
              = link_to 'https://www.youtube.com/channel/UCxkERUsycwg2r1piCepu4Xw',
                class: 'link-secondary' do
                %i.px-1.fab.fa-1x.fa-youtube
              = link_to 'https://www.linkedin.com/company/asyncgo/', class: 'link-secondary' do
                %i.px-1.fab.fa-1x.fa-linkedin
    -# haml-lint:disable LineLength
    = javascript_include_tag 'https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js',
      integrity: 'sha384-pQQkAEnwaBkjpqZ8RU1fF1AKtTcHJwFl3pblpTlHXybJjHpMYo79HY3hIi4NKxyj',
      crossorigin: 'anonymous', type: 'text/javascript'
    -# haml-lint:disable LineLength
