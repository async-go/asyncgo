- type_class = "attachment--#{blob.representable? ? 'preview' : 'file'}"
- extension_class = "attachment--#{blob.filename.extension}"
%figure.attachment{ class: "#{type_class} #{extension_class}" }
  - if blob.representable?
    - image_size_limit = local_assigns[:in_gallery] ? [800, 600] : [1024, 768]
    = image_tag blob.representation(resize_to_limit: image_size_limit)

  %figcaption.attachment__caption
    - if (caption = blog.try(:caption))
      = caption
    - else
      %span.attachment__name= blob.filename
      %span.attachment__size= number_to_human_size blob.byte_size
